<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ezekiel & Logan!</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

    :root {
      --glass-bg: rgba(18,18,20,0.44);
      --accent: #e07a9a;
      --text-soft: #f6eef0;
      --muted: #d8cfd1;
      --card-shadow: 0 8px 32px rgba(3,4,10,0.6);
      --glow: 0 6px 30px rgba(255,255,255,0.06);
    }

    html,body {
      height:100%;margin:0;
      font-family:'Poppins',sans-serif;
      background:#101018;color:var(--text-soft);
    }

    .page {position:relative;min-height:100vh;overflow:hidden;}
    .bg-layer {position:absolute;inset:0;z-index:0;transition:opacity 900ms ease;
      background:linear-gradient(90deg,#f48fb1 0%,#64b5f6 100%);
      filter:saturate(0.92) contrast(0.95) brightness(0.88);}
    .bg-breathe {position:absolute;inset:0;z-index:1;pointer-events:none;
      background:radial-gradient(1200px 600px at 20% 30%,rgba(255,255,255,0.02),transparent 15%),
                 radial-gradient(900px 600px at 80% 70%,rgba(255,255,255,0.01),transparent 12%);
      animation:breathe 8s ease-in-out infinite;mix-blend-mode:overlay;}
    @keyframes breathe {0%{opacity:.92;}50%{opacity:.98;}100%{opacity:.92;}}

    .content {position:relative;z-index:5;padding:48px 20px;display:flex;justify-content:center;align-items:flex-start;min-height:100vh;box-sizing:border-box;}
    .glass {width:100%;max-width:760px;margin:48px auto;background:var(--glass-bg);
      border-radius:18px;padding:28px;box-shadow:var(--card-shadow);backdrop-filter:blur(10px) saturate(0.9);
      border:1px solid rgba(255,255,255,0.04);color:var(--text-soft);text-align:center;}

    h1,h2,h3,h4,p,label,button{ text-shadow: var(--glow); }

    h1{margin:6px 0 12px;font-weight:600;}
    p { margin:8px 0; color:var(--muted); font-weight:300; }

    .login-row { display:flex; gap:12px; justify-content:center; align-items:center; flex-wrap:wrap; margin-top:8px; }
    input[type="password"]{
      padding:12px 14px;border-radius:12px;border:none;outline:none;font-size:16px;width:260px;
      background:rgba(255,255,255,0.03);color:var(--text-soft);
    }
    button {
      padding:10px 18px;border-radius:12px;border:none;background:linear-gradient(180deg,var(--accent),#d86d8f);
      color:white;font-weight:600;cursor:pointer;
    }
    .color-section { margin-top:18px; border-top:1px solid rgba(255,255,255,0.03); padding-top:18px; display:grid; gap:12px; }
    .pair { display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
    .pair .label { text-align:left; font-weight:600; width:160px; }
    .swatch { width:44px;height:28px;border-radius:8px;border:1px solid rgba(255,255,255,0.06); }
    .hint { font-size:13px;color:rgba(255,255,255,0.6);margin-top:6px; }

    /* Dropdowns */
    .dropdown { position:relative; display:inline-block; width:220px; }
    .dropdown-button { width:100%; background:rgba(255,255,255,0.03); border-radius:12px;
      padding:12px 40px 12px 14px; color:var(--text-soft); cursor:pointer; text-align:left; font-size:15px; position:relative; }
    .dropdown-button::after { content:'â–¾'; position:absolute; right:14px; top:50%; transform:translateY(-50%); color:var(--muted);}
    .dropdown-list { position:absolute; top:calc(100% + 6px); left:0; right:0; background:rgba(18,18,20,0.9);
      border-radius:14px; display:none; flex-direction:column; z-index:10;}
    .dropdown-list.show {display:flex;}
    .dropdown-option { padding:10px 14px; font-size:15px; color:var(--text-soft); cursor:pointer;}
    .dropdown-option:hover { background:rgba(255,255,255,0.07); color:var(--accent); }

    /* Connection indicator */
    #statusLight {
      position:fixed;bottom:14px;right:14px;
      display:flex;align-items:center;gap:6px;
      font-size:13px;color:var(--muted);
    }
    #statusLight span {
      display:inline-block;width:10px;height:10px;border-radius:50%;
      background:#666;
    }
    #statusLight.connected span { background:#81c784; }
    #statusLight.disconnected span { background:#e57373; }
  </style>
</head>
<body>
  <div class="page">
    <div id="bg-main" class="bg-layer"></div>
    <div id="bg-top" class="bg-layer" style="opacity:0;"></div>
    <div class="bg-breathe"></div>

    <main class="content">
      <section class="glass" id="loginCard">
        <h2>Ezekiel & Loganâ€™s Safe Space~!</h2>
        <p>Enter the secret password to enter:</p>
        <div class="login-row">
          <input id="passwordInput" type="password" placeholder="Password" onkeypress="if(event.key==='Enter') checkPassword()" />
          <button onclick="checkPassword()">Enter</button>
        </div>
      </section>

      <section class="glass" id="mainContent" style="display:none;">
        <h1>Ezekiel & Logan!</h1>
        <p><strong>Anniversary:</strong> November 2, 2025</p>
        <p id="countdown"></p>

        <div class="color-section">
          <h3>Our Colors!</h3>

          <div class="pair">
            <div>
              <div class="label">ðŸ’— Logan â€” left side</div>
              <div class="dropdown" data-person="logan">
                <div class="dropdown-button">â€” choose â€”</div>
                <div class="dropdown-list">
                  <div class="dropdown-option" data-value="red">Dominant</div>
                  <div class="dropdown-option" data-value="orange">Confused</div>
                  <div class="dropdown-option" data-value="yellow">Breeding</div>
                  <div class="dropdown-option" data-value="green">Submissive</div>
                  <div class="dropdown-option" data-value="lightblue">Lovey</div>
                  <div class="dropdown-option" data-value="blue">Attention</div>
                  <div class="dropdown-option" data-value="purple">Desperate</div>
                  <div class="dropdown-option" data-value="pink">Romantic</div>
                  <div class="dropdown-option" data-value="white">Flustered</div>
                  <div class="dropdown-option" data-value="brown">Annoyed</div>
                </div>
              </div>
            </div>
            <div><div id="loganSwatch" class="swatch"></div></div>
          </div>

          <div class="pair">
            <div>
              <div class="label">ðŸ’™ Ezekiel â€” right side</div>
              <div class="dropdown" data-person="ezekiel">
                <div class="dropdown-button">â€” choose â€”</div>
                <div class="dropdown-list">
                  <div class="dropdown-option" data-value="red">Dominant</div>
                  <div class="dropdown-option" data-value="orange">Confused</div>
                  <div class="dropdown-option" data-value="yellow">Breeding</div>
                  <div class="dropdown-option" data-value="green">Submissive</div>
                  <div class="dropdown-option" data-value="lightblue">Lovey</div>
                  <div class="dropdown-option" data-value="blue">Attention</div>
                  <div class="dropdown-option" data-value="purple">Desperate</div>
                  <div class="dropdown-option" data-value="pink">Romantic</div>
                  <div class="dropdown-option" data-value="white">Flustered</div>
                  <div class="dropdown-option" data-value="brown">Annoyed</div>
                </div>
              </div>
            </div>
            <div><div id="ezekielSwatch" class="swatch"></div></div>
          </div>
        </div>

        <div class="hint">Your choices sync automatically ðŸ’ž</div>

        <footer style="margin-top:20px;font-size:13px;">Positive Thoughts!</footer>
      </section>
    </main>
  </div>

  <div id="statusLight" class="disconnected"><span></span>Disconnected</div>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getDatabase, ref, set, onValue, onDisconnect } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAPR-TAnTSg7D2dkVjBU8SPBtTEtiztcsI",
      authDomain: "ezekiellogancolors.firebaseapp.com",
      projectId: "ezekiellogancolors",
      storageBucket: "ezekiellogancolors.firebasestorage.app",
      messagingSenderId: "343759103076",
      appId: "1:343759103076:web:97aeb014daffc57292eb71",
      measurementId: "G-3Y3L96K98Q",
      databaseURL: "https://ezekiellogancolors-default-rtdb.firebaseio.com"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const status = document.getElementById("statusLight");
    function setStatus(connected){
      if(connected){
        status.className = "connected";
        status.innerHTML = "<span></span>Connected";
      }else{
        status.className = "disconnected";
        status.innerHTML = "<span></span>Disconnected";
      }
    }

    const colorPresets = {
      red:"#ff4b5c",orange:"#ffb347",yellow:"#fff176",green:"#81c784",lightblue:"#80d8ff",
      blue:"#64b5f6",purple:"#ba68c8",pink:"#f48fb1",white:"#ffffff",brown:"#a1887f"
    };
    const DEFAULT_LOGAN="#f48fb1",DEFAULT_EZEKIEL="#283c6b";

    const bgMain=document.getElementById('bg-main'), bgTop=document.getElementById('bg-top');
    const setMainGradient=(l,r)=>bgMain.style.background=`linear-gradient(90deg,${l} 0%,${r} 100%)`;
    const crossfadeGradient=(l,r)=>{bgTop.style.background=`linear-gradient(90deg,${l} 0%,${r} 100%)`;
      bgTop.style.opacity=1;setTimeout(()=>{setMainGradient(l,r);bgTop.style.opacity=0;},800);};
    const applyColors=(l,r)=>crossfadeGradient(l,r);

    // sync updates
    function listenForUpdates(){
      onValue(ref(db,'logan'),snap=>{
        const data=snap.val(); if(data){document.getElementById('loganSwatch').style.background=data.color; applyColors(data.color,localStorage.getItem('ezekielColor')||DEFAULT_EZEKIEL);}
      });
      onValue(ref(db,'ezekiel'),snap=>{
        const data=snap.val(); if(data){document.getElementById('ezekielSwatch').style.background=data.color; applyColors(localStorage.getItem('loganColor')||DEFAULT_LOGAN,data.color);}
      });
    }
    listenForUpdates();

    // dropdown logic
    document.querySelectorAll('.dropdown').forEach(drop=>{
      const button=drop.querySelector('.dropdown-button');
      const list=drop.querySelector('.dropdown-list');
      const person=drop.dataset.person;

      button.addEventListener('click',e=>{
        e.stopPropagation();document.querySelectorAll('.dropdown-list').forEach(l=>l!==list&&l.classList.remove('show'));
        list.classList.toggle('show');
      });

      list.querySelectorAll('.dropdown-option').forEach(opt=>{
        opt.addEventListener('click',()=>{
          const color=colorPresets[opt.dataset.value];
          set(ref(db,person),{color});
          list.classList.remove('show');
        });
      });
    });
    document.addEventListener('click',()=>document.querySelectorAll('.dropdown-list').forEach(l=>l.classList.remove('show')));

    // simple connected indicator
    import { ref as dbRef, onValue as dbOnValue } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";
    const connRef=dbRef(db,'.info/connected');
    dbOnValue(connRef,snap=>setStatus(!!snap.val()));

    const PASSWORD="ilysm!";
    window.checkPassword=function(){
      if(document.getElementById('passwordInput').value===PASSWORD){
        document.getElementById('loginCard').style.display='none';
        document.getElementById('mainContent').style.display='block';
      }else alert("Incorrect password ðŸ’”");
    };
  </script>
</body>
</html>
