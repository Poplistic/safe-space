<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ezekiel & Loganâ€™s Safe Space ðŸ’ž | Daily Love Challenges</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

    :root{
      --glass-bg: rgba(18,18,20,0.44);
      --accent: #e07a9a;
      --text-soft: #f6eef0;
      --muted: #d8cfd1;
      --card-shadow: 0 8px 32px rgba(3,4,10,0.6);
      --glow: 0 6px 30px rgba(255,255,255,0.06);
    }

    html,body{height:100%;margin:0;font-family:'Poppins',sans-serif;background:#101018;color:var(--text-soft);}
    .page {position:relative;min-height:100vh;overflow:hidden;}

    .bg-layer {position:absolute;inset:0;z-index:0;transition:opacity 900ms ease;
      background:linear-gradient(90deg,#f48fb1 0%,#64b5f6 100%);
      filter:saturate(0.92) contrast(0.95) brightness(0.88);}
    .bg-breathe {position:absolute;inset:0;z-index:1;pointer-events:none;
      background:radial-gradient(1200px 600px at 20% 30%,rgba(255,255,255,0.02),transparent 15%),
                 radial-gradient(900px 600px at 80% 70%,rgba(255,255,255,0.01),transparent 12%);
      animation:breathe 8s ease-in-out infinite;mix-blend-mode:overlay;}
    @keyframes breathe {0%{opacity:.92;transform:scale(1);}50%{opacity:.98;transform:scale(1.01);}100%{opacity:.92;transform:scale(1);}}

    .content {position:relative;z-index:5;padding:48px 20px;display:flex;justify-content:center;align-items:flex-start;min-height:100vh;box-sizing:border-box;}
    .glass {width:100%;max-width:760px;margin:48px auto;background:var(--glass-bg);
      border-radius:18px;padding:28px;box-shadow:var(--card-shadow);backdrop-filter:blur(10px) saturate(0.9);
      -webkit-backdrop-filter:blur(10px) saturate(0.9);border:1px solid rgba(255,255,255,0.04);
      color:var(--text-soft);text-align:center;}

    h1,h2,h3,h4,p,label,button{ text-shadow: var(--glow); }

    h1{margin:6px 0 12px;font-weight:600;letter-spacing:0.6px}
    p { margin:8px 0; color:var(--muted); font-weight:300; }

    .login-row { display:flex; gap:12px; justify-content:center; align-items:center; flex-wrap:wrap; margin-top:8px; }
    input[type="password"]{
      padding:12px 14px;border-radius:12px;border:none;outline:none;font-size:16px;width:260px;
      background:rgba(255,255,255,0.03);color:var(--text-soft);
      box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);
    }

    button {
      padding:10px 18px;border-radius:12px;border:none;background:linear-gradient(180deg,var(--accent),#d86d8f);
      color:white;font-weight:600;cursor:pointer;box-shadow:0 6px 18px rgba(200,80,120,0.12);
      transition: transform 160ms ease, box-shadow 160ms ease;
    }
    button:hover{ transform: translateY(-3px); box-shadow:0 12px 36px rgba(200,80,120,0.12); }

    .color-section { margin-top:18px; border-top:1px solid rgba(255,255,255,0.03); padding-top:18px; display:grid; gap:12px; }
    .pair {
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .pair .label { text-align:left; font-weight:600; color:var(--text-soft); width:160px; }

    .swatch { width:44px;height:28px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);box-shadow:inset 0 1px 0 rgba(255,255,255,0.02); }

    .hint { font-size:13px;color:rgba(255,255,255,0.6);margin-top:6px; }
    iframe { border-radius:12px; margin-top:10px; width:100%; max-width:500px; border:0; }
    footer { margin-top:16px; font-size:13px; color:rgba(255,255,255,0.6); }

    .reveal { animation: revealIn 700ms cubic-bezier(.2,.9,.2,1) both; }
    @keyframes revealIn {from{opacity:0;transform:translateY(18px) scale(.995);}to{opacity:1;transform:translateY(0) scale(1);}}

    .dropdown {
      position: relative;
      display: inline-block;
      width: 220px;
      font-family: 'Poppins', sans-serif;
    }

    .dropdown-button {
      width: 100%;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.05);
      border-radius: 12px;
      padding: 12px 40px 12px 14px;
      color: var(--text-soft);
      cursor: pointer;
      text-align: left;
      font-size: 15px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
      transition: all 0.25s ease;
      position: relative;
    }

    .dropdown-button::after {
      content: 'â–¾';
      position: absolute;
      right: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
      transition: color 0.25s ease;
    }

    .dropdown-button:hover {
      background: rgba(255,255,255,0.06);
      box-shadow: 0 0 0 2px rgba(255,255,255,0.06);
    }

    .dropdown-button:hover::after {
      color: var(--accent);
    }

    .dropdown-list {
      position: absolute;
      top: calc(100% + 6px);
      left: 0;
      right: 0;
      background: rgba(18,18,20,0.9);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 14px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.4);
      backdrop-filter: blur(12px) saturate(0.9);
      -webkit-backdrop-filter: blur(12px) saturate(0.9);
      display: none;
      flex-direction: column;
      z-index: 10;
      overflow: hidden;
      animation: dropdownFade 0.2s ease forwards;
    }

    @keyframes dropdownFade {
      from { opacity: 0; transform: translateY(-6px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .dropdown-list.show { display: flex; }

    .dropdown-option {
      padding: 10px 14px;
      font-size: 15px;
      color: var(--text-soft);
      cursor: pointer;
      transition: background 0.15s ease, color 0.15s ease;
    }

    .dropdown-option:hover {
      background: rgba(255,255,255,0.07);
      color: var(--accent);
    }

    /* Modal for shared note */
    .modal-backdrop {
      position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; z-index: 10000;
      align-items: center; justify-content: center;
    }
    .modal {
      width: min(680px, 92%);
      background: rgba(10,10,12,0.96);
      border-radius: 12px;
      padding: 18px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6);
      color: var(--text-soft);
    }
    .modal textarea {
      width: 100%; height: 180px; border-radius: 10px; padding: 12px; resize:vertical;
      background: rgba(255,255,255,0.03); color:var(--text-soft); border:1px solid rgba(255,255,255,0.04);
      outline:none;
    }
    .modal .actions { display:flex; gap:10px; justify-content:flex-end; margin-top:10px; }

    /* status light */
    #status {
      position: fixed; bottom: 14px; right: 14px; display:flex; gap:8px; align-items:center; z-index:9999;
      color:var(--muted);
      background: rgba(255,255,255,0.03); padding:6px 10px; border-radius:10px;
      border:1px solid rgba(255,255,255,0.03);
    }
    #status .dot { width:10px;height:10px;border-radius:50%;background:#b94a4a; box-shadow:0 0 8px rgba(185,74,74,0.16); }
    #status.connected .dot { background:#5fbf6b; box-shadow:0 0 12px rgba(95,191,107,0.28); }

    /* countdown style (no pulse) */
    #countdown { margin-top:6px; font-weight:600; color:var(--accent); }

    @media (max-width:720px){
      .glass{margin:24px 16px;padding:20px;}
      .pair{flex-direction:column;align-items:flex-start;}
      .pair .label{width:100%;}
      .dropdown{width:100%;}
    }
  </style>
</head>
<body>
  <div class="page">
    <div id="bg-main" class="bg-layer" style="opacity:1;"></div>
    <div id="bg-top" class="bg-layer" style="opacity:0;"></div>
    <div class="bg-breathe" aria-hidden="true"></div>

    <main class="content">
      <section class="glass" id="loginCard">
        <h2>Ezekiel & Loganâ€™s Safe Space~!</h2>
        <p>Enter the secret password to enter:</p>
        <div class="login-row">
          <input id="passwordInput" type="password" placeholder="Password" />
          <button id="enterBtn">Enter</button>
        </div>
      </section>

      <section class="glass reveal" id="mainContent" style="display:none;">
        <h1>Ezekiel & Logan!</h1>
        <p><strong>Anniversary:</strong> November 2</p>
        <p id="countdown" aria-live="polite"></p>

        <div style="display:flex;gap:12px;align-items:center;justify-content:center;margin-top:12px;">
          <!-- Star button opens modal for shared note -->
          <button id="openNoteBtn" title="Open shared note" style="font-size:20px;padding:8px 10px;border-radius:10px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);">
            â˜…
          </button>
          <div id="notePreview" style="max-width:560px;color:var(--muted);font-size:14px;text-align:left;">(No shared note yet â€” click the â˜… to add)</div>
        </div>

        <div class="color-section" aria-label="Colors">
          <h3 style="margin:6px 0 4px;">Our Colors!</h3>

          <div class="pair">
            <div style="display:flex;align-items:center;gap:10px;">
              <div class="label">ðŸ’— Logan â€” left side</div>
              <div class="dropdown" data-person="logan">
                <div class="dropdown-button">â€” choose â€”</div>
                <div class="dropdown-list">
                  <div class="dropdown-option" data-value="red">Dominant</div>
                  <div class="dropdown-option" data-value="orange">Confused</div>
                  <div class="dropdown-option" data-value="yellow">Breeding</div>
                  <div class="dropdown-option" data-value="green">Submissive</div>
                  <div class="dropdown-option" data-value="lightblue">Lovey</div>
                  <div class="dropdown-option" data-value="blue">Attention</div>
                  <div class="dropdown-option" data-value="purple">Desperate</div>
                  <div class="dropdown-option" data-value="pink">Romantic</div>
                  <div class="dropdown-option" data-value="white">Flustered</div>
                  <div class="dropdown-option" data-value="brown">Annoyed</div>
                </div>
              </div>
            </div>
            <div style="display:flex;align-items:center;gap:10px;">
              <div id="loganSwatch" class="swatch"></div>
            </div>
          </div>

          <div class="pair" style="margin-top:6px;">
            <div style="display:flex;align-items:center;gap:10px;">
              <div class="label">ðŸ’™ Ezekiel â€” right side</div>
              <div class="dropdown" data-person="ezekiel">
                <div class="dropdown-button">â€” choose â€”</div>
                <div class="dropdown-list">
                  <div class="dropdown-option" data-value="red">Dominant</div>
                  <div class="dropdown-option" data-value="orange">Confused</div>
                  <div class="dropdown-option" data-value="yellow">Breeding</div>
                  <div class="dropdown-option" data-value="green">Submissive</div>
                  <div class="dropdown-option" data-value="lightblue">Lovey</div>
                  <div class="dropdown-option" data-value="blue">Attention</div>
                  <div class="dropdown-option" data-value="purple">Desperate</div>
                  <div class="dropdown-option" data-value="pink">Romantic</div>
                  <div class="dropdown-option" data-value="white">Flustered</div>
                  <div class="dropdown-option" data-value="brown">Annoyed</div>
                </div>
              </div>
            </div>
            <div style="display:flex;align-items:center;gap:10px;">
              <div id="ezekielSwatch" class="swatch"></div>
            </div>
          </div>

          <div class="hint">Your choices sync automatically and update the background for both of you.</div>
        </div>

        <h3 style="margin-top:14px;">Quote of the Day</h3>
        <p id="quote" style="font-style:italic;"></p>

        <h3 style="margin-top:14px;">Daily Challenge</h3>
        <div id="dailyChallenge" style="margin-bottom:16px;font-weight:400;color:var(--muted);"></div>
        
        <h3 style="margin-top:12px;">Our Spotify Playlist</h3>
        <iframe src="https://open.spotify.com/embed/playlist/5YUZZEc6SYVn1JHeUHonhQ?utm_source=generator" height="380" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>

        <footer>Positive Thoughts!</footer>
      </section>
    </main>
  </div>

  <!-- Modal markup (hidden by default) -->
  <div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Shared note">
      <h3 style="margin:0 0 8px 0;">Shared Note</h3>
      <textarea id="sharedNoteTextarea" placeholder="Write something sweet, a memory, a plan..."></textarea>
      <div class="actions">
        <button id="saveNoteBtn">Save</button>
        <button id="closeNoteBtn">Close</button>
      </div>
      <div style="margin-top:8px;font-size:13px;color:var(--muted)">Saved automatically while you type (debounced).</div>
    </div>
  </div>

  <!-- status indicator -->
  <div id="status"><div class="dot"></div><div id="statusText">Connecting...</div></div>

  <!-- Firebase + app logic -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

    // ---------- Firebase config ----------
    const firebaseConfig = {
      apiKey: "AIzaSyAPR-TAnTSg7D2dkVjBU8SPBtTEtiztcsI",
      authDomain: "ezekiellogancolors.firebaseapp.com",
      databaseURL: "https://ezekiellogancolors-default-rtdb.firebaseio.com",
      projectId: "ezekiellogancolors",
      storageBucket: "ezekiellogancolors.firebasestorage.app",
      messagingSenderId: "343759103076",
      appId: "1:343759103076:web:97aeb014daffc57292eb71",
      measurementId: "G-3Y3L96K98Q"
    };
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // UI refs
    const bgMain = document.getElementById('bg-main');
    const bgTop = document.getElementById('bg-top');
    const statusBox = document.getElementById('status');
    const statusDot = statusBox.querySelector('.dot');
    const statusText = document.getElementById('statusText');

    // color presets
    const colorPresets = {
      red: "#ff4b5c",
      orange: "#ffb347",
      yellow: "#fff176",
      green: "#81c784",
      lightblue: "#80d8ff",
      blue: "#64b5f6",
      purple: "#ba68c8",
      pink: "#f48fb1",
      white: "#ffffff",
      brown: "#a1887f"
    };
    const DEFAULT_LOGAN = "#f48fb1";
    const DEFAULT_EZEKIEL = "#283c6b";

    // helper: gradient crossfade
    function crossfadeGradient(newLeft, newRight){
      bgTop.style.background = `linear-gradient(90deg, ${newLeft} 0%, ${newRight} 100%)`;
      bgTop.style.opacity = 0; void bgTop.offsetWidth;
      bgTop.style.transition = 'opacity 900ms cubic-bezier(.2,.9,.2,1)';
      bgTop.style.opacity = 1;
      setTimeout(() => {
        bgMain.style.background = `linear-gradient(90deg, ${newLeft} 0%, ${newRight} 100%)`;
        bgTop.style.transition = 'none';
        bgTop.style.opacity = 0;
      }, 920);
    }
    function updateSwatches(left,right){
      document.getElementById('loganSwatch').style.background = left;
      document.getElementById('ezekielSwatch').style.background = right;
    }

    // ---------- Colors: listen & write ----------
    const loganRef = ref(db,'colors/logan');
    const ezekielRef = ref(db,'colors/ezekiel');

    onValue(loganRef, snap => {
      const data = snap.val();
      const left = data?.color || DEFAULT_LOGAN;
      const right = document.getElementById('ezekielSwatch').style.background || DEFAULT_EZEKIEL;
      updateSwatches(left,right);
      crossfadeGradient(left,right);
    });

    onValue(ezekielRef, snap => {
      const data = snap.val();
      const right = data?.color || DEFAULT_EZEKIEL;
      const left = document.getElementById('loganSwatch').style.background || DEFAULT_LOGAN;
      updateSwatches(left,right);
      crossfadeGradient(left,right);
    });

    async function writeColor(person, value){
      const color = colorPresets[value];
      await set(ref(db, `colors/${person}`), { color, preset: value });
    }

    // ---------- Shared note ----------
    const noteRef = ref(db, 'shared/note');
    const notePreview = document.getElementById('notePreview');
    const openNoteBtn = document.getElementById('openNoteBtn');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const textarea = document.getElementById('sharedNoteTextarea');
    const saveNoteBtn = document.getElementById('saveNoteBtn');
    const closeNoteBtn = document.getElementById('closeNoteBtn');

    // listen for shared note updates
    onValue(noteRef, snap => {
      const txt = snap.val() || '';
      notePreview.textContent = txt ? (txt.length > 200 ? txt.slice(0,200) + 'â€¦' : txt) : '(No shared note yet â€” click the â˜… to add)';
      if(modalBackdrop.style.display === 'flex' && textarea.dataset.dirty !== 'true'){
        textarea.value = txt;
      }
      // flash status to indicate change
      flashStatus();
    });

    // open modal
    openNoteBtn.addEventListener('click', () => {
      modalBackdrop.style.display = 'flex';
      modalBackdrop.setAttribute('aria-hidden', 'false');
      // fetch once to populate
      onValue(noteRef, snap => {
        textarea.value = snap.val() || '';
        textarea.dataset.dirty = 'false';
      }, { onlyOnce: true });
    });

    // close modal
    closeNoteBtn.addEventListener('click', () => {
      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden', 'true');
      textarea.dataset.dirty = 'false';
    });

    // save button
    saveNoteBtn.addEventListener('click', async () => {
      await set(noteRef, textarea.value);
      textarea.dataset.dirty = 'false';
    });

    // debounced autosave
    let saveTimeout = null;
    textarea.addEventListener('input', () => {
      textarea.dataset.dirty = 'true';
      if (saveTimeout) clearTimeout(saveTimeout);
      saveTimeout = setTimeout(async () => {
        await set(noteRef, textarea.value);
        textarea.dataset.dirty = 'false';
      }, 800);
    });

    // ---------- Dropdown UI wiring ----------
    document.querySelectorAll('.dropdown').forEach(drop => {
      const btn = drop.querySelector('.dropdown-button');
      const list = drop.querySelector('.dropdown-list');
      const person = drop.dataset.person;

      btn.addEventListener('click', e => {
        e.stopPropagation();
        document.querySelectorAll('.dropdown-list').forEach(l => l !== list && l.classList.remove('show'));
        list.classList.toggle('show');
      });

      list.querySelectorAll('.dropdown-option').forEach(opt => {
        opt.addEventListener('click', async () => {
          const value = opt.dataset.value;
          btn.textContent = opt.textContent;
          list.classList.remove('show');
          await writeColor(person, value);
        });
      });
    });

    document.addEventListener('click', () => document.querySelectorAll('.dropdown-list').forEach(l => l.classList.remove('show')));

    // ---------- Connection status ----------
    const connRef = ref(db, '.info/connected');
    onValue(connRef, snap => {
      const connected = !!snap.val();
      statusBox.classList.toggle('connected', connected);
      statusText.textContent = connected ? 'Connected' : 'Disconnected';
      if(connected) {
        statusDot.style.transform = 'scale(1.05)';
        setTimeout(()=>statusDot.style.transform='scale(1)',300);
      }
    });

    function flashStatus(){
      statusBox.style.transition = 'box-shadow 260ms';
      statusBox.style.boxShadow = '0 6px 26px rgba(160,120,160,0.12)';
      setTimeout(()=>statusBox.style.boxShadow = 'none', 400);
    }

	// ---------- Daily Challenges ----------
	const challengeRef = ref(db, "shared/dailyChallenge");

	const challenges = [
	  "Send each other one voice note describing your favorite moment together.",
	  "Write a short poem or haiku about how you feel today.",
	  "Share one photo from your camera roll that makes you smile.",
	  "Text each other three things you love about the other person.",
	  "Plan your next date night â€” even if itâ€™s just a cozy movie at home.",
	  "Try to compliment each other five times today.",
	  "Recreate a cute memory by sending a photo or message about it.",
	  "Watch something together â€” even if youâ€™re apart.",
	  "Draw or doodle something that reminds you of the other person.",
	  "Say one thing youâ€™re grateful for about your relationship."
	];

	const challengeDiv = document.getElementById("dailyChallenge");

	function getChallengeForDate(dateStr) {
	  // use a hash of the date to consistently pick one
	  const daySeed = [...dateStr].reduce((a, c) => a + c.charCodeAt(0), 0);
	  return challenges[daySeed % challenges.length];
	}

	// check once per day
	function updateDailyChallenge() {
	  const todayStr = new Date().toISOString().slice(0, 10); // YYYY-MM-DD

	  onValue(challengeRef, async (snap) => {
		const data = snap.val();
		if (!data || data.date !== todayStr) {
		  // generate and store a new challenge for today
		  const newChallenge = getChallengeForDate(todayStr);
		  await set(challengeRef, { date: todayStr, text: newChallenge });
		  challengeDiv.textContent = newChallenge;
		} else {
		  // already exists for today
		  challengeDiv.textContent = data.text;
		}
	  });
	}

	updateDailyChallenge();

	// optional: refresh automatically if day changes without reload
	setInterval(updateDailyChallenge, 1000 * 60 * 60); // every hour

    // ---------- Quotes ----------
    const quotes=[
      "Love is not perfect, it just feels right when it's real.",
      "You're my today and all of my tomorrows.",
      "Every love story is special, but ours is my favorite.",
      "I still fall for you every single day.",
      "With you, I am home."
    ];
    document.getElementById('quote').innerText = quotes[Math.floor(Math.random()*quotes.length)];

    // ---------- Countdown to NEXT anniversary (auto yearly) ----------
    function getNextAnniversary(month = 11, day = 2) {
      // month is 1-based (11 = November)
      const now = new Date();
      let year = now.getFullYear();
      const candidate = new Date(year, month - 1, day, 0, 0, 0);
      if (candidate <= now) year += 1;
      return new Date(year, month - 1, day, 0, 0, 0);
    }

    function updateCountdownToNext() {
      const target = getNextAnniversary(11,2); // November 2 next occurrence
      const now = new Date();
      let diff = target - now;
      if (diff < 0) diff = 0;
      const days = Math.floor(diff / (1000*60*60*24));
      diff -= days * (1000*60*60*24);
      const hours = Math.floor(diff / (1000*60*60));
      diff -= hours * (1000*60*60);
      const minutes = Math.floor(diff / (1000*60));
      diff -= minutes * (1000*60);
      const seconds = Math.floor(diff / 1000);
      const text = `ðŸ’— Ezekiel & Logan: ${days} days, ${hours} hours, ${minutes} minutes, ${seconds} seconds until Nov ${target.getFullYear()} ðŸ’—`;
      document.getElementById('countdown').textContent = text;
    }
    updateCountdownToNext();
    setInterval(updateCountdownToNext, 1000);

    // ---------- Restore dropdown labels from DB on load ----------
    onValue(loganRef, snap => {
      const data = snap.val();
      if (data?.preset) {
        const btn = document.querySelector('[data-person="logan"] .dropdown-button');
        const labelEl = document.querySelector(`[data-person="logan"] [data-value="${data.preset}"]`);
        if (btn && labelEl) btn.textContent = labelEl.textContent;
      }
    });
    onValue(ezekielRef, snap => {
      const data = snap.val();
      if (data?.preset) {
        const btn = document.querySelector('[data-person="ezekiel"] .dropdown-button');
        const labelEl = document.querySelector(`[data-person="ezekiel"] [data-value="${data.preset}"]`);
        if (btn && labelEl) btn.textContent = labelEl.textContent;
      }
    });

    // ---------- Password: robust, global handler ----------
    // expose global function so inline onclick/Enter works
    window.checkPassword = function(){
      const PASSWORD = "ilysm!";
      const input = document.getElementById('passwordInput');
      if (!input) return;
      const value = (input.value || '').trim();
      if (value === PASSWORD) {
        const login = document.getElementById('loginCard');
        const main = document.getElementById('mainContent');
        if (login && main) {
          login.style.display = 'none';
          main.style.display = 'block';
          input.value = '';
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      } else {
        const login = document.getElementById('loginCard');
        if (login) {
          login.animate(
            [{ transform: 'translateX(0)' }, { transform: 'translateX(-8px)' }, { transform: 'translateX(8px)' }, { transform: 'translateX(0)' }],
            { duration: 420, easing: 'ease' }
          );
        }
        setTimeout(()=>alert('Incorrect password ðŸ’” â€” try again.'), 250);
      }
    };

    // attach Enter key and button listeners
    const pwInput = document.getElementById('passwordInput');
    if (pwInput) {
      pwInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          window.checkPassword();
        }
      });
    }
    const enterBtn = document.getElementById('enterBtn');
    if (enterBtn) enterBtn.addEventListener('click', window.checkPassword);

    // accessibility: close modal on Escape
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modalBackdrop.style.display === 'flex') {
        modalBackdrop.style.display = 'none';
      }
    });

  </script>
</body>
</html>

